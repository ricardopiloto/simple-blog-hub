# Tasks: add-remaining-hardening-improvements-and-db-script-rule

Ordem sugerida. Dependências: 1 pode ser feita em paralelo com 2 e 3; 4 e 5 dependem de 2/3 para documentação consistente.

- [x] **1. Validação de slug com regex na API** — No DTO `CreateOrUpdatePostRequest` (backend/api/Models/PostDto.cs), adicionar `[RegularExpression(...)]` ao campo `Slug` restringindo a caracteres seguros para URL (ex.: `^[a-z0-9]+(?:-[a-z0-9]+)*$` — minúsculas, números, hífens; sem espaços nem caracteres especiais). Garantir que o controller usa ModelState e devolve BadRequest quando o slug for inválido (já coberto se as Data Annotations forem validadas antes do uso).
- [x] **2. Documentação: logging e permissões da pasta data/** — Em docs/security (SECURITY-REMEDIATION.md ou SECURITY-HARDENING.md, ou nova secção em docs/deploy), adicionar: (a) que os pontos de logging existentes e futuros **não** devem registar senhas, tokens ou dados sensíveis em texto claro; recomendar revisão ao implementar auditoria; (b) que a pasta `data/` no host (onde fica o SQLite em deploy) **deve** ter permissões restritivas (ex.: apenas o utilizador que corre a API/BFF; documentar exemplo com chmod ou proprietário).
- [x] **3. Regra de script para alterações de BD no README da API** — Em backend/api/README.md, na secção de migrações manuais (ou nova subsecção "Regra para alterações de esquema"), documentar: **qualquer change que introduza alteração de esquema de base de dados** (nova tabela, nova coluna, ou migração EF que altere o esquema) **deve** incluir um script SQL em `backend/api/Migrations/Scripts/` para execução manual quando aplicável, e a change **deve** referenciar esse script no README da API e nas suas tarefas. Manter lista existente de scripts e referência ao guia de atualização.
- [x] **4. Spec project-docs: requisito de script para alterações de BD** — Adicionar em openspec/changes/add-remaining-hardening-improvements-and-db-script-rule/specs/project-docs/spec.md um requisito ADDED: quando uma change introduz alteração de esquema de base de dados, o projeto **deve** disponibilizar um script SQL em `backend/api/Migrations/Scripts/` para execução manual (quando aplicável) e **deve** documentá-lo no README da API e na change; incluir cenário verificável.
- [x] **5. Validar** — Executar `openspec validate add-remaining-hardening-improvements-and-db-script-rule --strict` e corrigir eventuais falhas.
